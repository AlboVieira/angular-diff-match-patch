<!DOCTYPE html>
<html lang="en" id="ng-app" ng-app="diffDemo">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>angular-diff-match-patch</title>
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="demo.css">
	<!--[if lte IE 7]>
		<script src="//cdnjs.cloudflare.com/ajax/libs/json3/3.3.2/json3.min.js"></script>
	<![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.0-rc.0/angular.js"></script>
	<script src="//neil.fraser.name/software/diff_match_patch/svn/trunk/javascript/diff_match_patch.js"></script>
	<script src="angular-diff-match-patch.js"></script>
	<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
	<script>

		/**
		 * Most of this plunkr module is from the Angular documentation (https://docs.angularjs.org/js/docs.js)
		 */
		var manifest =
		{
		  "name": "angular-diff-match-patch",
		  "files": [
		    "index.html",
		    "angular-diff-match-patch.js",
		    "demo.css"
		  ]
		};

		var plunkr = angular.module('plunkr', []);
		plunkr.factory('formPostData', ['$document', function($document) {
			return function(url, fields) {
			/**
			 * Form previously posted to target="_blank", but pop-up blockers were causing this to not work.
			 * If a user chose to bypass pop-up blocker one time and click the link, they would arrive at
			 * a new default plnkr, not a plnkr with the desired template.
			 */
			var form = angular.element('<form style="display: none;" method="post" action="' + url + '"></form>');
			angular.forEach(fields, function(value, name) {
			  var input = angular.element('<input type="hidden" name="' +  name + '">');
			  input.attr('value', value);
			  form.append(input);
			});
			$document.find('body').append(form);
			form[0].submit();
			form.remove();
			};
		}])
		.factory('openPlunkr', ['formPostData', '$http', '$q', function(formPostData, $http, $q) {
		  return function() {
	        var filePromises = [];

	        angular.forEach(manifest.files, function(filename) {
	          filePromises.push($http.get(filename, { transformResponse: [] })
	            .then(function(response) {
	              return {
	                name: filename,
	                content: response.data
	              };
	            }));
	        });
	        return $q.all(filePromises)
	        .then(function(files) {
		        var postData = {};

		        angular.forEach(files, function(file) {
		          postData['files[' + file.name + ']'] = file.content;
		        });

		        postData['tags[0]'] = "angularjs";
		        postData['tags[1]'] = "example";
		        postData.private = true;
		        postData.description = 'angular-diff-match-patch';

		        formPostData('http://plnkr.co/edit/?p=preview', postData);
		    })
		  };
		}])

		/**
		 * Actual demo app
		 */
		var app = angular.module('diffDemo', ['plunkr','ui.bootstrap','diff-match-patch']);
		app.controller('diffCtrl', ['openPlunkr', '$scope', function(openPlunkr, $scope) {
			$scope.left = ["I am the very model of a modern Major-General,",
						   "I've information vegetable, animal, and mineral,",
						   "I know the kings of England, and I quote the fights historical,",
						   "From Marathon to Waterloo, in order categorical."].join('\n');

			$scope.right = ["I am the very model of a cartoon individual,",
						    "My animation's comical, unusual, and whimsical,",
						    "I know the kings of England, and I quote the fights historical,",
						    "From wicked puns and stupid jokes to anvils that drop on your head."].join('\n');

			$scope.openPlunkr = openPlunkr;
		}]);
	</script>
	<style>
		div.col-md-6 p textarea.inputBox {
			height: 120px;
		}
	</style>
</head>
<body ng-controller="diffCtrl">
<div class="container-fluid">
	<div class="row text-center">
		<h1>angular-diff-match-patch</h1>
		<button type="button" class="btn btn-default" ng-click="openPlunkr()">Edit in Plunkr</button>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<div class="row">
				<div class="col-md-6">
					<h3>Left side</h3>
					<p><textarea class="inputBox form-control" ng-model="left"></textarea></p>
				</div>
				<div class="col-md-6">
					<h3>Right side</h3>
					<p><textarea class="inputBox form-control" ng-model="right"></textarea></p>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-body"><pre class="textdiff" diff left-obj="left" right-obj="right"></pre></div>
				<div class="panel-footer">diff</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-body"><pre class="textdiff" processing-diff left-obj="left" right-obj="right"></pre></div>
				<div class="panel-footer">processingDiff</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-body"><pre class="textdiff" semantic-diff left-obj="left" right-obj="right"></pre></div>
				<div class="panel-footer">semanticDiff</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="panel panel-default">
				<div class="panel-body"><pre class="textdiff" line-diff left-obj="left" right-obj="right"></pre></div>
				<div class="panel-footer">lineDiff</div>
			</div>
		</div>
	</div>
</div>

<a href="https://github.com/amweiss/angular-diff-match-patch"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

</body>
